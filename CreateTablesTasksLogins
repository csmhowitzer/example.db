CREATE TABLE Tasks (
    ID INTEGER PRIMARY KEY,
    TaskName TEXT NOT NULL UNIQUE,
    DueDate TEXT NOT NULL,
    State TEXT CHECK(State IN ('started', 'closed', 'in-process')) NOT NULL,
    CreatedDate TEXT NOT NULL,
    ModifiedDate TEXT NOT NULL
);

CREATE TABLE TaskAssignments (
    TaskId INTEGER NOT NULL,
    UserId INTEGER NOT NULL,
    AssignedDate TEXT NOT NULL,
    PRIMARY KEY (TaskId, UserId),
    FOREIGN KEY (TaskId) REFERENCES Tasks(ID) ON DELETE CASCADE,
    FOREIGN KEY (UserId) REFERENCES Users(ID) ON DELETE CASCADE
);

CREATE TABLE LoginDetails (
    UserId INTEGER PRIMARY KEY,
    Password TEXT NOT NULL,
    FailedLoginCount INTEGER DEFAULT 0,
    TimeoutDate TEXT NULL,
    LastLoginDate TEXT NULL,
    FOREIGN KEY (UserId) REFERENCES Users(ID) ON DELETE CASCADE
);
